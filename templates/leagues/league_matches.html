{% extends "base.html" %}
{% block title %}Ù…Ø¨Ø§Ø±ÙŠØ§Øª {{ league.name }}{% endblock %}

{% block content %}
<div class="container card-3d" style="margin-top: 30px;">
    
    <h2>ğŸ“… Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª - {{ league.name }}</h2>
    
    <form method="POST" action="{% url 'generate_matches_card' %}" target="_blank">
        {% csrf_token %}

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                {% if user == league.owner %}
                    <a href="{% url 'match_create' league.id %}" class="btn btn-modern">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø¨Ø§Ø±Ø§Ø©</a>
                {% endif %}
            </div>
            
            <button type="submit" class="btn btn-modern btn-outline-yellow">
                ğŸ« Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
            </button>
        </div>
        
        <div class="table-responsive">
            
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th style="text-align: center;">ØªØ­Ø¯ÙŠØ¯</th> <th>Ø§Ù„ÙØ±ÙŠÙ‚ A</th>
                        <th>Ø§Ù„ÙØ±ÙŠÙ‚ B</th>
                        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                        <th>Ø§Ù„Ù…ÙƒØ§Ù†</th>
                        <th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th>
                        <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    {% for match in matches %}
                    <tr>
                        <td style="text-align: center;">
                            <input type="checkbox" name="selected_matches" value="{{ match.id }}" class="match-checkbox">
                        </td>

                        <td>
                            {% if match.team_a.logo %}
                                <img src="{{ match.team_a.logo.url }}" class="team-logo-in-table" alt="">
                            {% endif %}
                            {{ match.team_a.name }}
                        </td>
                        <td>
                            {% if match.team_b.logo %}
                                <img src="{{ match.team_b.logo.url }}" class="team-logo-in-table" alt="">
                            {% endif %}
                            {{ match.team_b.name }}
                        </td>
                        <td>{{ match.date|date:"Y-m-d H:i" }}</td>
                        <td>{{ match.stadium }}</td>
                        <td class="match-result">
                            {% if match.goals_team_a is not None and match.goals_team_b is not None %}
                                {{ match.goals_team_a }} - {{ match.goals_team_b }}
                            {% else %}
                                <span class="pending-match">Ù„Ù… ØªÙ„Ø¹Ø¨ Ø¨Ø¹Ø¯</span>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'match_detail' match.id %}" class="btn btn-sm btn-modern btn-outline-blue">ğŸ‘ï¸ Ø¹Ø±Ø¶</a>
                            {% if user == league.owner %}
                                <a href="{% url 'match_update' match.id %}" class="btn btn-sm btn-modern btn-outline-yellow">ØªØ¹Ø¯ÙŠÙ„</a>
                                <a href="{% url 'match_delete' match.id %}" class="btn btn-sm btn-modern btn-outline-red">Ø­Ø°Ù</a>
                            {% endif %}
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="7" style="text-align: center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø¨Ø¹Ø¯.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </form>
    </div>
{% endblock %}

{% block extra_css %}
<style>
    /* 1. ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ­Ø¯ */
    h2 {
        color: var(--phosphor-yellow, #CCFF00); 
        font-weight: bold;
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        position: relative;
        margin-bottom: 30px; 
    }
    h2:after {
        content: '';
        position: absolute;
        bottom: -10px;
        right: 0; 
        width: 80px;
        height: 4px;
        background: linear-gradient(90deg, var(--phosphor-yellow, #CCFF00), var(--phosphor-yellow, #CCFF00));
        border-radius: 2px;
    }

    /* 2. ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø§ÙƒÙ† (Ù…Ù†Ø³ÙˆØ® Ù…Ù† Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©) */
    .table-responsive {
        overflow-x: auto;
    }
    .table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }
    .table-striped tbody tr:nth-of-type(odd) {
        background-color: rgba(255, 255, 255, 0.03); 
    }
    .table-hover tbody tr:hover {
        background-color: rgba(228, 255, 0, 0.1); 
        color: var(--phosphor-yellow, #e4ff00);
    }
    .table th, .table td {
        padding: 0.9rem 0.75rem;
        vertical-align: middle;
        border-top: 1px solid rgba(255, 255, 255, 0.1); 
        text-align: right;
        white-space: nowrap;
    }
    .table thead th {
        border-top: none;
        border-bottom: 2px solid var(--phosphor-yellow, #e4ff00);
        color: var(--phosphor-yellow, #e4ff00);
        font-weight: 600;
    }

    /* 3. ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø®Ø§ØµØ© Ø¨Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© (Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø©) */
    .team-logo-in-table {
        width: 25px !important;
        height: 25px !important;
        object-fit: cover;
        border: 1px solid var(--gray, #cebe08);
        border-radius: 4px;
        margin-left: 8px; /* Ù…Ø³Ø§ÙØ© Ù‚Ø¨Ù„ Ø§Ù„Ø§Ø³Ù… */
        vertical-align: middle;
    }
    
    .match-result {
        font-weight: 700;
        font-size: 1.2rem;
        color: var(--phosphor-yellow, #e4ff00);
        text-align: center !important;
    }
    .pending-match {
        font-weight: 400;
        font-size: 0.9rem;
        color: var(--gray, #cebe08);
    }
    /* ØªÙˆØ³ÙŠØ· Ø¹Ù†ÙˆØ§Ù† "Ø§Ù„Ù†ØªÙŠØ¬Ø©" */
    .table thead th:nth-child(5) {
        text-align: center;
    }

    /* 4. ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø´ÙØ§ÙØ© (Ù…Ù†Ø³ÙˆØ® Ù…Ù† Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©) */
    .btn-outline-yellow {
        background: transparent;
        color: var(--phosphor-yellow, #e4ff00);
        border: 2px solid var(--phosphor-yellow, #e4ff00);
        box-shadow: none;
    }
    .btn-outline-yellow:hover {
        background: var(--phosphor-yellow, #e4ff00);
        color: var(--dark-black, #111);
        box-shadow: 0 5px 15px rgba(228, 255, 0, 0.3);
    }
    .btn-outline-red {
        background: transparent;
        color: #ff4d4d;
        border: 2px solid #ff4d4d;
        box-shadow: none;
    }
    .btn-outline-red:hover {
        background: #ff4d4d;
        color: #fff;
        box-shadow: 0 5px 15px rgba(255, 77, 77, 0.3);
    }
    .match-checkbox {
        transform: scale(1.5); /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù…Ø±Ø¨Ø¹ */
        cursor: pointer;
        accent-color: var(--phosphor-yellow, #CCFF00); /* ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ */
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
// Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ù‡Ù†Ø§ØŒ Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ base.html
</script>
{% endblock %}