{% extends "base.html" %}
{% block title %}Ù…Ø¨Ø§Ø±ÙŠØ§Øª {{ league.name }}{% endblock %}

{% block content %}
<div class="container card-3d" style="margin-top: 30px;">
    
    <h2>ğŸ“… Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª - {{ league.name }}</h2>
    
    <form method="POST" action="{% url 'generate_matches_card' %}">
        {% csrf_token %}

        <div class="d-flex-header" style="margin-bottom: 20px;">
            <div>
                {% if user == league.owner %}
                    <a href="{% url 'match_create' league.id %}" class="btn btn-modern">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø¨Ø§Ø±Ø§Ø©</a>
                {% endif %}
            </div>
            
            <button type="submit" class="btn btn-modern btn-outline-yellow">
                ğŸ« Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
            </button>
        </div>
        
        <div class="table-responsive">
            
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th class="text-center-cell">ØªØ­Ø¯ÙŠØ¯</th>
                        <th>Ø§Ù„ÙØ±ÙŠÙ‚ A</th>
                        <th>Ø§Ù„ÙØ±ÙŠÙ‚ B</th>
                        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                        <th>Ø§Ù„Ù…ÙƒØ§Ù†</th>
                        <th class="text-center-cell">Ø§Ù„Ù†ØªÙŠØ¬Ø©</th>
                        <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    {% for match in matches %}
                    <tr>
                        <td class="text-center-cell">
                            <input type="checkbox" name="selected_matches" value="{{ match.id }}" class="match-checkbox">
                        </td>

                        <td>
                            {% if match.team_a.logo %}
                                <img src="{{ match.team_a.logo.url }}" class="table-mini-logo" alt="">
                            {% endif %}
                            {{ match.team_a.name }}
                        </td>
                        <td>
                            {% if match.team_b.logo %}
                                <img src="{{ match.team_b.logo.url }}" class="table-mini-logo" alt="">
                            {% endif %}
                            {{ match.team_b.name }}
                        </td>
                        <td>{{ match.date|date:"Y-m-d H:i" }}</td>
                        <td>{{ match.stadium }}</td>
                        <td class="match-result">
                            {% if match.goals_team_a is not None and match.goals_team_b is not None %}
                                {{ match.goals_team_a }} - {{ match.goals_team_b }}
                            {% else %}
                                <span class="pending-match">Ù„Ù… ØªÙ„Ø¹Ø¨ Ø¨Ø¹Ø¯</span>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'match_detail' match.id %}" class="btn btn-sm btn-primary" style="padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">ğŸ‘ï¸</a>
                            {% if user == league.owner %}
                                <a href="{% url 'match_update' match.id %}" class="btn btn-sm btn-outline-yellow" style="padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">âœï¸</a>
                                <a href="{% url 'match_delete' match.id %}" class="btn btn-sm btn-outline-red" style="padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">ğŸ—‘ï¸</a>
                            {% endif %}
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="7" style="text-align: center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø¨Ø¹Ø¯.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </form>
</div>
{% endblock %}